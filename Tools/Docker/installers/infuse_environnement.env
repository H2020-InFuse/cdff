#!/usr/bin/env bash

#Get working directory and script containing directory
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ]; do # resolve $SOURCE until the file is no longer a symlink
  DIR="$( cd -P "$( dirname "$SOURCE" )" && pwd )"
  SOURCE="$(readlink "$SOURCE")"
  [[ $SOURCE != /* ]] && SOURCE="$DIR/$SOURCE" # if $SOURCE was a relative symlink, we need to resolve it relative to the path where the symlink file was located
done
DIR="$( cd -P "$( dirname "$SOURCE" )" && pwd )"
INSTALL_DIR="$(readlink -m $DIR"/../../../External/install")"
echo "Sourcing INFUSE environnement"

AddToPath=$INSTALL_DIR/bin
AddToPkg=$INSTALL_DIR/lib/pkgconfig:$INSTALL_DIR/share/pkgconfig

# add package config path if not present
if [[ ":$PKG_CONFIG_PATH:" != *":$AddToPkg:"* ]];then
 PKG_CONFIG_PATH="${PKG_CONFIG_PATH}:$AddToPkg"
 #add to current shell
 export PKG_CONFIG_PATH
  #add to system 

fi
# add bin install dir to path if not present
if [[ ":$PATH:" != *"$AddToPath"* ]];then
 PATH="${PATH}:$AddToPath"
 export PATH
fi
